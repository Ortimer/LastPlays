/*!Mon Mar 30 2015 09:26:14 */
$(function(){function a(){d||(d=!0,c.animate({bottom:"0"},function(){$(this).animate({bottom:"-30px"},100,function(){var a=$(this).position().left+700;$(this).delay(300).animate({right:a},3500,function(){c=$("#elCalvo").css({bottom:"-700px",right:"0"}),d=!1})})}))}var b=(new Konami(a),'<img id="elCalvo" style="display: none" src="/img/calvo.png" />');$("body").append(b);var c=$("#elCalvo").css({position:"fixed",bottom:"-700px",right:"0",display:"block"}),d=!1}),window.BggBuddy=Ember.Application.create({}),BggBuddy.ApplicationController=Ember.Controller.extend({}),BggBuddy.Router.map(function(){this.resource("root",{path:"/"}),this.resource("index",{path:"/:bggUser"},function(){this.route("lastplays",{path:"lastplays"})})}),BggBuddy.ApplicationRoute=Ember.Route.extend({model:function(){return Ember.$.getJSON("menuInfo")}}),BggBuddy.IndexRoute=Ember.Route.extend({model:function(){return Ember.$.getJSON("bggUser")},afterModel:function(a){this.transitionTo(null!=a?"index.lastplays":"root")}}),Ember.View.reopen({didInsertElement:function(){this._super(),Ember.run.scheduleOnce("afterRender",this,this.afterRenderEvent)},afterRenderEvent:function(){}}),BggBuddy.ApplicationView=Ember.View.extend({afterRenderEvent:function(){$("#side-menu").metisMenu(),$(window).bind("load resize",function(){topOffset=50,width=this.window.innerWidth>0?this.window.innerWidth:this.screen.width,width<768?($("div.navbar-collapse").addClass("collapse"),topOffset=100):$("div.navbar-collapse").removeClass("collapse"),height=(this.window.innerHeight>0?this.window.innerHeight:this.screen.height)-1,height-=topOffset,height<1&&(height=1),height>topOffset&&$("#page-wrapper").css("min-height",height+"px")})}}),BggBuddy.IndexLastplaysView=Ember.View.extend({afterRenderEvent:function(){$(function(){$("#switch-view").click(function(){$(this).find("button").toggleClass("active"),$(".article-wrapper").toggleClass("bloc col-xs-12 col-xs-4")})})}}),BggBuddy.RootView=Ember.View.extend({afterRenderEvent:function(){var a=this;BootstrapDialog.show({title:"Sign in",message:'<div id="bggUserModal" class="form-group"><label class="control-label" for="bggUserInput">BGG user</label><input id="bggUserInput" type="text" class="form-control" id="bggUserInput" placeholder="BGG User"><div>',closable:!1,buttons:[{label:"Sign in",hotkey:13,action:function(a){a.close()}}],onhide:function(b){var c=b.getModalBody().find("input").val();return 0==$.trim(c.toLowerCase()).length?(b.getModalBody().find("#bggUserModal").addClass("has-error"),!1):void a.get("controller").transitionToRoute("index",$.trim(c.toLowerCase()))}})}});