/*!Fri Apr 03 2015 13:14:17 */
window.BggBuddy=Ember.Application.create({}),BggBuddy.ApplicationAdapter=DS.RESTAdapter.extend({}),BggBuddy.ApplicationController=Ember.Controller.extend({}),BggBuddy.BggUser=DS.Model.extend({firstName:DS.attr("string"),lastName:DS.attr("string"),avatarLink:DS.attr("string")}),BggBuddy.Collection=DS.Model.extend({games:DS.hasMany("game")}),BggBuddy.Game=DS.Model.extend({collection_id:DS.belongsTo("collection"),bggUrl:DS.attr("string"),name:DS.attr("string"),image:DS.attr("string"),totalPlays:DS.attr("string"),plays:DS.attr("string")}),BggBuddy.MenuInfo=DS.Model.extend({messages:DS.hasMany("menuMessage",{async:!0}),tasks:DS.hasMany("menuTask",{async:!0}),sideMenuOptions:DS.hasMany("menuSideOption",{async:!0})}),BggBuddy.MenuMessage=DS.Model.extend({author:DS.attr("string"),time:DS.attr("string"),message:DS.attr("string")}),BggBuddy.MenuTask=DS.Model.extend({name:DS.attr("string"),progress:DS.attr("number"),barType:DS.attr("string")}),BggBuddy.MenuSideOption=DS.Model.extend({name:DS.attr("string"),icon:DS.attr("string"),link:DS.attr("string"),subMenus:DS.hasMany("menuSideSub",{async:!0})}),BggBuddy.MenuSideSub=DS.Model.extend({name:DS.attr("string"),link:DS.attr("string")}),BggBuddy.Router.map(function(){this.resource("root",{path:"/"}),this.resource("index",{path:"/:bggUser"},function(){this.route("lastplays",{path:"lastplays"})})}),BggBuddy.ApplicationRoute=Ember.Route.extend({model:function(){return this.store.find("menuInfo",1)},aftermodel:function(){$("#side-menu").metisMenu()}}),BggBuddy.IndexLastplaysRoute=Ember.Route.extend({model:function(){var bggUser=this.modelFor("index");return this.store.find("collection",bggUser.get("id"))}}),BggBuddy.IndexRoute=Ember.Route.extend({model:function(params){return this.store.find("bggUser",params.bggUser)},afterModel:function(bggUser){this.transitionTo(null!=bggUser?"index.lastplays":"root")}}),BggBuddy.CollectionSerializer=DS.RESTSerializer.extend(DS.EmbeddedRecordsMixin,{attrs:{games:{embedded:"always"}}}),Ember.View.reopen({didInsertElement:function(){this._super(),Ember.run.scheduleOnce("afterRender",this,this.afterRenderEvent)},afterRenderEvent:function(){}}),BggBuddy.ApplicationView=Ember.View.extend({afterRenderEvent:function(){$(function(){function calvoInit(){locked||(locked=!0,calvo.animate({bottom:"0"},function(){$(this).animate({bottom:"-30px"},100,function(){var offset=$(this).position().left+700;$(this).delay(300).animate({right:offset},3500,function(){calvo=$("#elCalvo").css({bottom:"-700px",right:"0"}),locked=!1})})}))}var calvo=(new Konami(calvoInit),$("#elCalvo").css({position:"fixed",bottom:"-700px",right:"0",display:"block"})),locked=!1});var changeMenu=function(){var topOffset=50,width=window.innerWidth>0?window.innerWidth:screen.width;768>width?($("div.navbar-collapse").addClass("collapse"),topOffset=100):$("div.navbar-collapse").removeClass("collapse");var height=(window.innerHeight>0?window.innerHeight:screen.height)-1;height-=topOffset,1>height&&(height=1),height>topOffset&&$("#page-wrapper").css("min-height",height+"px")};$(changeMenu),$(window).resize(function(){changeMenu()})}}),BggBuddy.IndexLastplaysView=Ember.View.extend({afterRenderEvent:function(){$(function(){$("#switch-view").click(function(){$(this).find("button").toggleClass("active"),$(".article-wrapper").toggleClass("bloc col-xs-4 col-xs-12")})});var changeLayout=function(){var articleWarper=$(".article-wrapper");if(width=window.innerWidth>0?window.innerWidth:screen.width,width<768)articleWarper.removeClass(),articleWarper.addClass("article-wrapper bloc col-xs-12");else if(width<980)articleWarper.removeClass(),articleWarper.addClass("article-wrapper bloc col-xs-6");else{var buttons=$("#switch-view").find("button");buttons.removeClass("active"),buttons.eq(1).addClass("active"),articleWarper.removeClass(),articleWarper.addClass("article-wrapper col-xs-12")}};$(changeLayout),$(window).resize(function(){changeLayout()})}}),BggBuddy.RootView=Ember.View.extend({afterRenderEvent:function(){var self=this;BootstrapDialog.show({title:"Sign in",message:'<div id="bggUserModal" class="form-group"><label class="control-label" for="bggUserInput">BGG user</label><input id="bggUserInput" type="text" class="form-control" id="bggUserInput" placeholder="BGG User"><div>',closable:!1,buttons:[{label:"Sign in",hotkey:13,action:function(dialogRef){dialogRef.close()}}],onhide:function(dialogRef){var bggUser=dialogRef.getModalBody().find("input").val();return 0==$.trim(bggUser.toLowerCase()).length?(dialogRef.getModalBody().find("#bggUserModal").addClass("has-error"),!1):void self.get("controller").transitionToRoute("index",$.trim(bggUser.toLowerCase()))}})}});